import{r as o,j as t,F as l,a as g,c as d,d as u,s as p,k as m}from"./config.5c3d81e4.js";import"./axios.b95f0d2f.js";const x=()=>{const[n,i]=o.exports.useState(!1),[a,s]=o.exports.useState(!1),h=()=>{s(!0),d.post(`${u}/users/star-the-story`,{slug:window.story_slug,user_type:window.type,user_id:window.auth.id}).then(({data:e})=>{i(e.data),s(!1)}).catch(e=>{s(!1);let r=e.response.data;r.errors&&p(Object.values(r.errors)[0],"error")})},w=e=>{s(!0),d.post(`${u}/users/check-star`,{slug:window.story_slug,user_type:window.type,user_id:window.auth.id},{signal:e.signal}).then(({data:r})=>{i(r.data),s(!1)}).catch(r=>{s(!1);let c=r.response.data;c.errors&&p(Object.values(c.errors)[0],"error")})};return o.exports.useEffect(()=>{const e=new AbortController;return w(e),()=>{e.abort()}},[]),t(l,{children:g("div",{className:"mt-1 group/star relative",children:[!a&&t("div",{className:"hidden group-hover/star:block absolute top-4 right-4  shadow-md bg-slate-100 text-black rounded py-1 px-2 text-xs z-10",children:t("span",{className:"whitespace-nowrap",children:n?t(l,{children:window.locale_take_star}):t(l,{children:window.locale_give_star})})}),t("button",{className:`text-xl text-yellow-500 ${a?"animate-pulse":"cursor-pointer"}`,disabled:a,onClick:e=>{h()},children:t("ion-icon",{name:`star${n?"":"-outline"}`})})]})})};m.createRoot(document.getElementById("root")).render(t(x,{}));
