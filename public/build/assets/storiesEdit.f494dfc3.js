import{r as o,j as e,a as i,F as y,f as R,d as f,s as m,c as $,e as L}from"./config.5c3d81e4.js";import{S as D,H as E,R as M,a as O}from"./Spinner.d41a2331.js";import{B as j}from"./ButtonLoading.4ae85373.js";import{S as B,i as F}from"./react-select-animated.esm.a35da4cb.js";import{l as x}from"./quill.snow.5eddaa50.js";import"./axios.b95f0d2f.js";const A=()=>{const[N,p]=o.exports.useState(!0),[n,l]=o.exports.useState({}),[u,h]=o.exports.useState([]),[_,v]=o.exports.useState([]),[g,S]=o.exports.useState(null),b=o.exports.useRef(null),[s,w]=o.exports.useState([]),[r,c]=o.exports.useState(!1),k=()=>{c(!0);const a=new FormData;a.append("name",n.name),a.append("mm_name",n.mm_name),a.append("description",n.description),a.append("mm_description",n.mm_description),a.append("categories",JSON.stringify(u)),a.append("slug",n.slug),a.append("admin_id",window.auth.id),g&&a.append("image",g),R.post(`${f}/stories/update`,a).then(({data:t})=>{c(!1),m(t.data.message,"success")}).catch(function(t){c(!1);let d=t.response.data;w(d.errors),d.errors.errors&&m(d.errors.errors[0],"error")})},C=()=>{$.post(`${f}/stories/edit/get-data`,{slug:window.story_slug}).then(({data:a})=>{p(!1),l(a.data.story),a.data.story.categories.map(t=>{h(d=>[...d,{value:t.id,label:t.name}])}),v(a.data.categories)}).catch(function(a){p(!1);let t=a.response.data;w(t.errors),t.errors.errors&&m(t.errors.errors[0],"error")})};return o.exports.useEffect(()=>{C()},[]),e("div",{className:"mt-4",children:N?e("div",{className:"flex place-content-center items-center pt-36",children:e(D,{width:400,height:400})}):i(y,{children:[e("div",{className:"flex items-center gap-3 place-content-center text-xl",children:window.locale==="mm"?n.mm_name:n.name}),e("div",{className:`grid grid-cols-1 my-3 mx-2 ${r?"opacity-70 pointer-events-none":""}`,children:i("div",{className:"rounded-3xl w-auto bg-slate-100 dark:bg-slate-600 dark:text-white py-3 px-7 shadow-md",children:[i("div",{className:"py-2",children:[e("p",{children:window.locale_name}),e("input",{value:n.name,onChange:a=>{l(t=>({...t,name:a.target.value}))},disabled:r,type:"text",className:"input-content lg:w-1/2"}),s.name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.name[0]})]}),i("div",{className:"py-2",children:[e("p",{children:window.locale_mm_name}),e("input",{type:"text",className:"input-content lg:w-1/2",value:n.mm_name,onChange:a=>{l(t=>({...t,mm_name:a.target.value}))},disabled:r}),s.mm_name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.mm_name[0]})]}),i("div",{className:"py-2",children:[e("p",{children:window.locale_categories}),e("div",{className:"text-black",children:e(B,{className:"focus:outline-none focus:ring focus:ring-sky-400 lg:w-1/2 my-1",closeMenuOnSelect:!1,components:F(),isMulti:!0,value:u,onChange:h,options:_,isDisabled:r})}),s.categories&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.categories[0]})]}),i("div",{className:"py-2",children:[e("p",{className:"mb-1",children:window.locale==="mm"?`${window.locale_image}${window.locale_new}`:`${window.locale_new} ${window.locale_image}`}),e("input",{type:"file",onChange:a=>{S(a.target.files[0])},className:"input-file",ref:b,disabled:r}),s.image&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.image[0]})]}),i("div",{className:"py-2",children:[e("p",{children:window.locale_description}),e("div",{className:"bg-white text-black my-1",children:e(x,{theme:"snow",value:n.description,onChange:a=>{l(t=>({...t,description:a}))},readOnly:r,className:"w-full h-full"})}),s.description&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.description[0]})]}),i("div",{className:"py-2",children:[e("p",{children:window.locale_mm_description}),e("div",{className:"bg-white text-black my-1",children:e(x,{theme:"snow",value:n.mm_description,onChange:a=>{l(t=>({...t,mm_description:a}))},readOnly:r,className:"w-full h-full"})}),s.mm_description&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:s.mm_description[0]})]}),e("div",{className:"py-2 text-center",children:e("button",{className:`sky-button-rounded ${r?"opacity-70":""}`,disabled:r,onClick:k,children:i("div",{className:"flex items-center gap-1",children:[r?e(j,{cl:"pr-1 py-1"}):e("ion-icon",{name:"create-outline"}),e("span",{children:window.locale_save})]})})})]})})]})})},H=()=>e(y,{children:e(E,{children:e(M,{children:e(O,{path:"/",element:e(A,{})})})})});L(document.getElementById("root")).render(e(H,{}));
