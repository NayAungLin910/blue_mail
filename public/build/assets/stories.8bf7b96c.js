import{r as s,a,j as e,b as o,F as C,c as S,d as p,s as r,f as Y,e as Z}from"./config.5c3d81e4.js";import{S as ee,H as te,R as ae,a as se}from"./Spinner.d41a2331.js";import{P as ne}from"./Paginator.3ee33d62.js";import{B as U}from"./ButtonLoading.4ae85373.js";import{S as le,i as ie}from"./react-select-animated.esm.a35da4cb.js";import{C as re}from"./ConfirmBox.8265aa8f.js";import"./axios.b95f0d2f.js";const oe=()=>{const[i,h]=s.exports.useState({}),[q,g]=s.exports.useState(!0),[$,k]=s.exports.useState(1),[L,D]=s.exports.useState(window.initial_search),[c,F]=s.exports.useState(!1),[B,E]=s.exports.useState(""),[R,M]=s.exports.useState(""),[O,j]=s.exports.useState(""),[f,x]=s.exports.useState(!1),[z,G]=s.exports.useState([]),[P,A]=s.exports.useState(window.initial_category),[H,w]=s.exports.useState(!1),[I,J]=s.exports.useState("latest"),[v,d]=s.exports.useState(!1),[N,m]=s.exports.useState({}),[K,_]=s.exports.useState(!1),[b,y]=s.exports.useState(""),Q=t=>{y(t),S.post(`${p}/stories/make-feature`,{slug:t}).then(({data:n})=>{y(""),h(l=>({...l,data:l.data.map(u=>u.slug===t?{...u,featured:"yes"}:{...u,featured:"no"})})),r(n.data,"success")}).catch(function(n){y("");let l=n.response.data;l.errors.errors&&r(l.errors.errors[0],"error")})},V=()=>{_(!0),S.post(`${p}/stories/delete`,{slug:N.slug}).then(({data:t})=>{_(!1),d(!1),h(n=>({...n,data:n.data.filter(l=>l.slug!==N.slug)})),m({}),r(t.data,"success")}).catch(function(t){_(!1),d(!1),m({});let n=t.response.data;n.errors.slug&&r(n.errors.slug[0],"error"),n.errors.errors&&r(n.errors.errors[0],"error")})},W=()=>{D(""),E(""),M(""),j(""),A([]),J("latest")},X=()=>{w(!0),Y.get(`${p}/categories/get/select/data`).then(({data:t})=>{w(!1),G(t.data)}).catch(function(t){w(!1);let n=t.response;r(n.data.message,"error")})},T=()=>{g(!0),x(!0),S.get(`${p}/stories/get/data?search=${L}&mm_search=${B}&categories=${JSON.stringify(P)}&sortby=${I}&start_date=${R}&end_date=${O}&page=${$}`).then(({data:t})=>{g(!1),x(!1),h(t.data)}).catch(function(t){g(!1),x(!1);let n=t.response;r(n.data.message,"error")})};return s.exports.useEffect(()=>{T(),X()},[$]),a("div",{className:"mt-4",children:[a("div",{className:`${c||v?"opacity-50 blur-sm pointer-events-none duration-300":""}`,id:"main-body",children:[e("div",{className:"grid grid-cols-1",children:a("div",{className:"flex items-center text-xl place-content-center gap-2",children:[e("ion-icon",{name:"book-outline"}),e("span",{children:window.locale_stories})]})}),a("div",{className:"flex flex-col lg:flex-row items-center gap-3 px-2 mt-3 mx-2",children:[a("div",{className:"lg:w-1/3 w-2/3",children:[e("span",{className:"whitespace-nowrap",children:window.locale_search_english_name}),e("input",{type:"text",value:L,onChange:t=>D(t.target.value),className:"input-content",placeholder:window.locale_english_name})]}),e("div",{className:"lg:mt-5",children:e("button",{className:`sky-button-rounded ${f?"opacity-70":""}`,onClick:()=>{T()},disabled:f,children:a("div",{className:"flex items-center gap-1",children:[f?e(U,{}):e("ion-icon",{name:"search-outline"}),window.locale_search]})})}),e("div",{className:"lg:mt-4",children:e("button",{className:"sky-button-rounded",onClick:()=>{F(!c)},children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"filter-outline"}),window.locale_filter]})})})]}),q?e("div",{className:"flex place-content-center",children:e("div",{className:"mt-14",children:e(ee,{width:350,height:350})})}):a("div",{children:[i.data.length>0?e("div",{className:"grid grid-cols-1 mt-2 lg:grid-cols-3 mx-2",children:i.data.map((t,n)=>a("div",{className:"rounded-lg bg-gray-100 dark:bg-slate-600 p-4 my-3 mx-1 shadow-lg hover:shadow-xl hover:bg-gray-200 dark:hover:bg-gray-500",children:[e("div",{className:"flex place-content-center",children:e("a",{href:`${o}/stories/view/${t.slug}`,children:e("img",{src:`${o}${t.image===""?"/default_images/404.jpg":"/storage/"+t.image}`,alt:t.name,className:"rounded-lg"})})}),a("div",{className:"pt-2 text-center",children:[" ",e("a",{href:`${o}/stories/view/${t.slug}`,className:"text-lg hover:underline",children:window.locale==="mm"?t.mm_name:t.name})]}),e("div",{className:"my-2 flex flex-wrap items-center gap-1",children:t.categories.map((l,u)=>e("a",{className:"sky-button py-1 px-1 text-sm",href:`${o}/stories/search?category=${l.slug}`,children:window.locale==="mm"?l.mm_name:l.name},l.id))}),window.type&&window.type==="admin"&&a("div",{className:"flex items-center place-content-between",children:[e("a",{href:`${o}/admin/stories/edit/${t.slug}`,className:"sky-button p-1",children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"create-outline"}),e("span",{children:window.locale_edit})]})}),e("button",{className:`${b===t.slug||t.featured==="yes"?"opacity-70 hover:bg-green-600":""} green-button py-1 px-2`,onClick:()=>{Q(t.slug)},disabled:b===t.slug||t.featured==="yes",children:e("div",{className:"flex items-center",children:a("div",{className:"flex items-center gap-1",children:[b===t.slug&&e(U,{}),t.featured==="yes"?e(C,{children:window.locale_featured}):e(C,{children:window.locale_feature})]})})}),e("button",{className:"red-button py-1 px-2",onClick:()=>{d(!0),m(t)},children:e("div",{className:"flex items-center",children:e("span",{className:"text-lg mt-1",children:e("ion-icon",{name:"trash-bin-outline"})})})})]}),e("div",{className:"text-xs text-right mt-3",children:t.created_at})]},t.slug))}):e("div",{className:"flex items-center place-content-center mt-5",children:window.locale_no_records}),i.data.length>0&&e("div",{className:"flex place-content-center items-center",children:e(ne,{links:i.links,current_page:i.current_page,next_page_url:i.next_page_url,prev_page_url:i.prev_page_url,setPage:k})})]})]}),c&&e("div",{className:`filter-options-div ${!window.type||window.type==="user"?"lg:left-[49vw] lg:top-[4.3rem] h-[100vw]":""}`,children:a("div",{children:[a("div",{className:"flex items-center gap-4",children:[e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{F(!c)},className:"sky-button-rounded pt-1 px-0 py-0 w-8 h-8",children:e("span",{className:"text-lg",children:e("ion-icon",{name:"close-outline"})})})}),e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{W()},className:"sky-button-rounded",children:e("div",{className:"p-0 m-0 flex items-center",children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg pt-1",children:e("ion-icon",{name:"trash-outline"})}),window.locale_clear_filter]})})})})]}),a("div",{className:"grid grid-cols-1 lg:text-left my-2",children:[a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_search_mm_name}),e("input",{type:"text",value:B,onChange:t=>{k(1),E(t.target.value)},className:"input-content",placeholder:window.locale_mm_name})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_start_date}),e("input",{name:"startDate",type:"datetime-local",value:R,onChange:t=>{M(t.target.value)},className:"input-content"})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_end_date}),e("input",{name:"endDate",type:"datetime-local",value:O,onChange:t=>{j(t.target.value)},className:"input-content"})]}),a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_filter_categories}),e(le,{className:"focus:outline-none text-black focus:ring focus:ring-sky-400 my-1",isDisabled:H,isLoading:H,closeMenuOnSelect:!1,components:ie(),isMulti:!0,value:P,onChange:A,options:z})]}),e("div",{className:"px-4 py-2",children:e("div",{className:"flex gap-5",children:a("div",{children:[e("span",{children:window.locale_sort_by}),a("select",{onChange:t=>{J(t.target.value)},value:I,name:"sortBy",id:"category-sort-by-select",className:"text-black px-1 w-23 focus:outline-none block mt-2 border border-sky-400 shadow-md",children:[e("option",{value:"latest",children:window.locale_latest}),e("option",{value:"oldest",children:window.locale_oldest})]})]})})})]})]})}),v&&e(re,{openConfirm:v,setOpenConfirm:d,confirmElement:N,setConfirmElement:m,confrimLoading:K,confrimAction:V,children:window.locale_sure_delete})]})},ce=()=>e(C,{children:e(te,{children:e(ae,{children:e(se,{path:"/",element:e(oe,{})})})})});Z(document.getElementById("root")).render(e(ce,{}));
