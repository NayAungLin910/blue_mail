import{r as n,a,j as e,F as r,c as f,d as N,s as o,e as ie}from"./config.5c3d81e4.js";import{S as ce,H as de,R as me,a as pe}from"./Spinner.d41a2331.js";import{C as he}from"./ConfirmBox.8265aa8f.js";import{P as ue}from"./Paginator.3ee33d62.js";import{B as Y}from"./ButtonLoading.4ae85373.js";import"./axios.b95f0d2f.js";const ge=()=>{const[O,z]=n.exports.useState(""),[H,A]=n.exports.useState(""),[I,_]=n.exports.useState(!1),[m,Z]=n.exports.useState({}),[c,v]=n.exports.useState(""),[y,p]=n.exports.useState(""),[b,h]=n.exports.useState(""),[d,k]=n.exports.useState(!1),[u,ee]=n.exports.useState({}),[T,C]=n.exports.useState(1),[S,q]=n.exports.useState("10"),[E,G]=n.exports.useState(""),[$,J]=n.exports.useState(""),[g,K]=n.exports.useState(!1),[D,Q]=n.exports.useState("latest"),[B,U]=n.exports.useState(""),[L,V]=n.exports.useState(""),[M,x]=n.exports.useState(!1),[R,w]=n.exports.useState({}),[te,j]=n.exports.useState(!1),[i,F]=n.exports.useState({}),[ae,ne]=n.exports.useState(!0),se=()=>{_(!0),f.post(`${N}/categories/create`,{name:O,mm_name:H}).then(({data:t})=>{_(!1),W(),z(""),A(""),o(t.data,"success")}).catch(function(t){_(!1);let s=t.response.data;Z(s.errors),s.errors.errors&&o(s.errors.errors[0],"error")})},le=()=>{j(!0),f.post(`${N}/categories/delete`,{slug:R.slug}).then(({data:t})=>{j(!1),x(!1),F(s=>({...s,data:s.data.filter(l=>l.slug!==R.slug)})),w({}),o(t.data,"success")}).catch(function(t){j(!1),x(!1),w({});let s=t.response.data;s.errors.slug&&o(s.errors.slug[0],"error"),s.errors.errors&&o(s.errors.errors[0],"error")})},re=()=>{k(!0);let t=new FormData;t.append("name",y),t.append("mm_name",b),t.append("slug",c),f.post(`${N}/categories/edit`,t).then(({data:s})=>{k(!1);let l=s.data.latest_slug;F(X=>({...X,data:X.data.map(P=>P.slug===c?{...P,name:y,mm_name:b,slug:l}:P)})),v(""),p(""),h(""),o(s.data.message,"success")}).catch(function(s){k(!1);let l=s.response.data;ee(l.errors),l.errors.errors&&o(l.errors.errors[0],"error")})},oe=()=>{G(""),J(""),q("10"),Q("latest"),U(""),V("")},W=()=>{f.get(`${N}/categories/get/data?page=${T}&search=${E}&searchMm=${$}&sortBy=${D}&startDate=${B}&endDate=${L}&pageCount=${S}`).then(({data:t})=>{ne(!1),F(t.data)})};return n.exports.useEffect(()=>{W()},[T,E,S,$,D,B,L]),a("div",{className:"pt-4",children:[a("div",{className:`${g||M?"opacity-50 blur-sm pointer-events-none duration-300":""}`,children:[a("div",{className:"flex justify-center items-center gap-3 w-full text-xl z-0",children:[e("ion-icon",{name:"pricetag-outline",className:"mr-6 z-0"}),e("span",{children:window.locale_categories})]}),a("div",{className:"grid grid-cols-1 lg:grid-cols-3 mt-2 bg-slate-100 shadow-md dark:bg-slate-600 rounded-xl mx-4 p-2",children:[a("div",{className:"px-4 mx-auto my-2 w-full lg:mt-5 text-center lg:text-left",children:[e("span",{className:"whitespace-nowrap",children:window.locale==="mm"?a(r,{children:[window.locale_category," ",window.locale_new]}):a(r,{children:[window.locale_new," ",window.locale_category]})}),e("input",{type:"text",name:"name",value:O,onChange:t=>{z(t.target.value)},placeholder:window.locale_category_english_name_placeholder,className:"input-content w-full "}),m.name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:m.name[0]})]}),a("div",{className:"px-4 my-2 lg:pt-9",children:[e("input",{type:"text",name:"mm_name",value:H,onChange:t=>{A(t.target.value)},placeholder:window.locale_category_mm_name_placeholder,className:"input-content w-full "}),m.mm_name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:m.mm_name[0]})]}),e("div",{className:"px-4 my-2 lg:pt-[2.4rem] lg:ml-0 text-center lg:text-left",children:e("button",{type:"button",className:"plus-button",onClick:se,disabled:I,children:e("div",{className:"flex items-center",children:I?e(Y,{cl:"py-1 px-0 m-0"}):e("span",{children:"+"})})})})]}),e("div",{className:"px-4 py-1 mb-3",children:e("button",{id:"filter-toggle-button",onClick:()=>{K(!g)},className:"sky-button-rounded mt-6",children:a("div",{className:"flex items-center",children:[e("span",{className:"text-xl",children:e("ion-icon",{name:"filter-outline"})}),e("span",{children:window.filter})]})})}),ae?e(r,{children:e("div",{className:"flex justify-center",children:e(ce,{width:200,height:200})})}):e(r,{children:i.data.length>1?e(r,{children:a("div",{className:"grid grid-cols-1 px-4",children:[e("div",{className:"overflow-auto rounded-lg shadow-md",children:a("table",{className:"w-full border-collapse ",children:[e("thead",{className:"bg-slate-800 text-white",children:a("tr",{children:[e("th",{className:"p-3 w-auto text-sm font-semibold tracking-wide whitespace-nowrap text-left",children:window.locale_name}),e("th",{className:"p-3 w-auto text-sm font-semibold tracking-wide whitespace-nowrap text-left",children:window.locale_mm_name}),e("th",{className:"p-3 w-auto text-sm font-semibold tracking-wide whitespace-nowrap text-left",children:window.locale_stories_count}),e("th",{className:"p-3 w-auto text-sm font-semibold tracking-wide whitespace-nowrap text-left",children:window.locale_created_at}),e("th",{className:"p-3 w-auto text-sm font-semibold tracking-wide whitespace-nowrap text-left"})]})}),e("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-500",children:i.data.map((t,s)=>a("tr",{className:`
                                                         bg-slate-100 dark:bg-slate-700 font-medium hover:bg-slate-200 dark:text-slate-300 dark:hover:bg-slate-500`,children:[c===t.slug?a(r,{children:[a("td",{className:"p-3 text-sm whitespace-nowrap",children:[e("input",{id:"edit-input-form-name",className:"input-content m-0",type:"text",value:y,onChange:l=>{p(l.target.value)}}),u.name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:u.name[0]})]}),a("td",{className:"p-3 text-sm whitespace-nowrap",children:[e("input",{id:"edit-input-form-mm-name",className:"input-content m-0",type:"text",value:b,onChange:l=>{h(l.target.value)}}),u.mm_name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:u.mm_name[0]})]})]}):a(r,{children:[e("td",{className:"p-3 text-sm whitespace-nowrap",children:t.name}),e("td",{className:"p-3 text-sm whitespace-nowrap",children:t.mm_name})]}),e("td",{className:"p-3 text-sm whitespace-nowrap",children:t.stories_count}),e("td",{className:"p-3 text-sm whitespace-nowrap",children:t.created_at}),e("td",{className:"p-3 text-sm whitespace-nowrap",children:a("div",{className:"flex item-center gap-4",children:[c===t.slug?e("div",{children:e("button",{className:`green-button py-1 px-2 ${d?"opacity-70":""}`,disabled:d,onClick:()=>{re()},children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg mt-1",children:d?e(Y,{cl:"pr-1 py-1"}):e("ion-icon",{name:"checkmark-outline"})}),e("span",{children:window.locale_save})]})})}):e(r,{children:e("button",{className:"sky-button py-1 px-2",onClick:()=>{v(t.slug),p(t.name),h(t.mm_name)},children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg mt-1",children:e("ion-icon",{name:"create-outline"})}),e("span",{children:window.locale_edit})]})})}),c===t.slug?e("div",{children:e("button",{className:`orange-button py-1 px-2 ${d?"opacity-70":""}`,onClick:()=>{v(""),p(""),h("")},disabled:d,children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg mt-1",children:e("ion-icon",{name:"close-outline"})}),e("span",{children:window.locale_cancel})]})})}):e(r,{children:e("button",{className:"red-button py-1 px-2",onClick:()=>{x(!M),w(t)},children:e("div",{className:"flex items-center",children:e("span",{className:"text-lg mt-1",children:e("ion-icon",{name:"trash-bin-outline"})})})})})]})})]},t.slug))})]})}),e(ue,{links:i.links,current_page:i.current_page,next_page_url:i.next_page_url,prev_page_url:i.prev_page_url,setPage:C})]})}):e(r,{children:e("div",{className:"grid grid-cols-1 text-center mt-10 mb-2",children:e("span",{className:"text-xl",children:window.locale_category_empty})})})})]}),g&&e("div",{className:"filter-options-div",children:a("div",{children:[a("div",{className:"flex items-center gap-4",children:[e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{K(!g)},className:"sky-button-rounded pt-1 px-0 py-0 w-8 h-8",children:e("span",{className:"text-lg",children:e("ion-icon",{name:"close-outline"})})})}),e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{oe()},className:"sky-button-rounded",children:e("div",{className:"p-0 m-0 flex items-center",children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg pt-1",children:e("ion-icon",{name:"trash-outline"})}),window.locale_clear_filter]})})})})]}),a("div",{className:"grid grid-cols-1 lg:text-left my-2",children:[a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_search_category}),e("input",{type:"text",value:E,onChange:t=>{C(1),G(t.target.value)},className:"input-content",placeholder:window.locale_category_english_name_placeholder})]}),a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_search_category_mm}),e("input",{type:"text",value:$,onChange:t=>{C(1),J(t.target.value)},className:"input-content",placeholder:window.locale_category_mm_name_placeholder})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_start_date}),e("input",{name:"startDate",type:"datetime-local",value:B,onChange:t=>{U(t.target.value)},className:"input-content"})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_end_date}),e("input",{name:"endDate",type:"datetime-local",value:L,onChange:t=>{V(t.target.value)},className:"input-content"})]}),e("div",{className:"px-4 py-2 text-left",children:e("div",{className:"flex gap-5",children:a("div",{children:[e("span",{children:window.locale_page_number}),a("select",{onChange:t=>{q(t.target.value)},value:S,name:"pageCount",id:"category-page-count",className:"text-black px-1 w-14 focus:outline-none block mt-2 border border-sky-400 shadow-md",children:[e("option",{value:"10",children:"10"}),e("option",{value:"15",children:"15"}),e("option",{value:"20",children:"20"})]})]})})}),e("div",{className:"px-4 py-2 text-left",children:e("div",{className:"flex gap-5",children:a("div",{children:[e("span",{children:window.locale_sort_by}),a("select",{onChange:t=>{Q(t.target.value)},value:D,name:"sortBy",id:"category-sort-by-select",className:"text-black px-1 w-23 focus:outline-none block mt-2 border border-sky-400 shadow-md",children:[e("option",{value:"latest",children:window.locale_latest}),e("option",{value:"oldest",children:window.locale_oldest})]})]})})})]})]})}),M&&a(he,{setOpenConfirm:x,openConfirm:!0,confirmElement:R,setConfirmElement:w,confrimLoading:te,confrimAction:le,children:[window.locale_sure_delete," "]})]})},xe=()=>e(r,{children:e(de,{children:e(me,{children:e(pe,{path:"/",element:e(ge,{})})})})});ie(document.getElementById("root")).render(e(xe,{}));
