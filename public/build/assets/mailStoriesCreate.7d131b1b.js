import{r as s,a,j as e,b as o,F as G,c as z,d as _,s as u,f as ne,e as le}from"./config.5c3d81e4.js";import{S as ie,H as re,R as oe,a as ce}from"./Spinner.d41a2331.js";import{C as de}from"./ConfirmBox.8265aa8f.js";import{P as me}from"./Paginator.3ee33d62.js";import{B as pe}from"./ButtonLoading.4ae85373.js";import{S as ue,i as ge}from"./react-select-animated.esm.a35da4cb.js";import"./axios.b95f0d2f.js";const he=()=>{const[i,K]=s.exports.useState({}),[Q,g]=s.exports.useState(!0),[b,S]=s.exports.useState(1),[C,y]=s.exports.useState(""),[c,k]=s.exports.useState(!1),[$,M]=s.exports.useState(""),[L,D]=s.exports.useState(""),[F,B]=s.exports.useState(""),[h,x]=s.exports.useState(!1),[V,W]=s.exports.useState([]),[j,E]=s.exports.useState([]),[O,f]=s.exports.useState(!1),[R,P]=s.exports.useState("latest"),[d,X]=s.exports.useState([]),[r,w]=s.exports.useState([]),[A,H]=s.exports.useState(""),[J,I]=s.exports.useState(""),[v,m]=s.exports.useState(!1),[Y,T]=s.exports.useState({}),[Z,N]=s.exports.useState(!1),ee=()=>{N(!0);const t=new FormData,n=r.map(l=>l.slug);t.append("storiesSlugs",JSON.stringify(n)),t.append("name",A),t.append("mm_name",J),t.append("admin_id",window.auth.id),z.post(`${_}/mail-stories/create`,t).then(({data:l})=>{w([]),H(""),I(""),m(!1),N(!1),u(l.data,"success")}).catch(function(l){m(!1),N(!1);let p=l.response.data;X(p.errors),p.errors.errors&&u(p.errors.errors[0],"error")})},te=t=>{r.some(n=>n.slug===t.slug)||w(n=>[...n,t])},U=t=>{r.some(n=>n.slug===t.slug)&&w(n=>n.filter(l=>l.slug!==t.slug))},ae=()=>{y(""),M(""),D(""),B(""),E([]),P("latest")},se=()=>{f(!0),ne.get(`${_}/categories/get/select/data`).then(({data:t})=>{f(!1),W(t.data)}).catch(function(t){f(!1);let n=t.response;u(n.data.message,"error")})},q=()=>{g(!0),x(!0),z.get(`${_}/stories/get/data?search=${C}&mm_search=${$}&categories=${JSON.stringify(j)}&sortby=${R}&start_date=${L}&end_date=${F}&page=${b}`).then(({data:t})=>{g(!1),x(!1),K(t.data)}).catch(function(t){g(!1),x(!1);let n=t.response;u(n.data.message,"error")})};return s.exports.useEffect(()=>{q(),se()},[b]),a("div",{className:"",children:[a("div",{className:`${c||v?"opacity-50 blur-sm pointer-events-none duration-300":""}`,id:"main-body",children:[e("div",{className:"grid grid-cols-1",children:a("div",{className:"flex mt-4 items-center text-xl place-content-center gap-2",children:[e("ion-icon",{name:"book-outline"}),e("span",{className:"",children:window.locale_mail_story_create})]})}),a("div",{className:"m-2 px-2",children:[e("p",{children:window.locale_chosen_stories}),e("div",{className:"p-3",children:r.length>0?a("div",{className:"rounded-xl bg-slate-100  dark:bg-slate-600 p-3 items-center flex flex-wrap place-content-center lg:place-content-start gap-2",children:[r.map(t=>a("div",{className:"flex gap-1 group/story max-w-[13rem] items-center bg-slate-50 dark:bg-slate-700 pr-1 rounded-lg shadow-md",children:[e("div",{children:e("img",{className:"w-24 h-10 object-cover rounded-l-lg",src:`${o}${t.image===""?"/default_images/404.jpg":"/storage/"+t.image}`,alt:window.locale==="mm"?t.mm_name:t.name})}),e("div",{className:"text-sm max-w-[8rem] text-ellipsis whitespace-nowrap overflow-hidden",children:window.locale==="mm"?t.mm_name:t.name}),e("div",{className:"relative right-9 lg:hidden w-0 shadown-none lg:group-hover/story:block",children:e("button",{className:"red-button",onClick:()=>{U(t)},children:e("ion-icon",{name:"close-outline"})})})]},t.slug)),a("div",{className:"flex w-full flex-col place-content-center items-center",children:[e("p",{children:window.locale_english_name}),e("input",{value:A,onChange:t=>{H(t.target.value)},type:"text",className:"input-content w-1/2"}),d.name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:d.name[0]})]}),a("div",{className:"flex w-full flex-col place-content-center items-center",children:[e("p",{children:window.locale_mm_name}),e("input",{value:J,onChange:t=>{I(t.target.value)},type:"text",className:"input-content w-1/2"}),d.mm_name&&e("p",{className:"text-red-500 dark:text-red-400 font-normal",children:d.mm_name[0]})]}),e("div",{className:"flex w-full place-content-center items-center mt-2",children:e("button",{className:"green-button",onClick:()=>{m(!0),T({name:""})},children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"mail-outline"}),window.locale_send]})})})]}):e(G,{children:e("p",{className:"text-sm",children:window.locale_no_records})})})]}),a("div",{className:"flex flex-col lg:flex-row items-center gap-3 px-2 mt-3 mx-2",children:[a("div",{className:"lg:w-1/3 w-2/3",children:[e("span",{className:"whitespace-nowrap",children:window.locale_search_english_name}),e("input",{type:"text",value:C,onChange:t=>y(t.target.value),className:"input-content",placeholder:window.locale_english_name})]}),e("div",{className:"lg:mt-5",children:e("button",{className:`sky-button-rounded ${h?"opacity-70":""}`,onClick:()=>{q()},disabled:h,children:a("div",{className:"flex items-center gap-1",children:[h?e(pe,{}):e("ion-icon",{name:"search-outline"}),window.locale_search]})})}),e("div",{className:"lg:mt-4",children:e("button",{className:"sky-button-rounded",onClick:()=>{k(!c)},children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"filter-outline"}),window.locale_filter]})})})]}),Q?e("div",{className:"flex place-content-center",children:e("div",{className:"mt-14",children:e(ie,{width:350,height:350})})}):a("div",{children:[i.data.length>0?e("div",{className:"grid grid-cols-1 mt-2 lg:grid-cols-3 mx-2",children:i.data.map((t,n)=>a("div",{className:"rounded-lg bg-gray-100 dark:bg-slate-600 p-4 my-3 mx-1 shadow-lg hover:shadow-xl hover:bg-gray-200 dark:hover:bg-gray-500",children:[e("div",{className:"flex place-content-center",children:e("a",{href:`${o}/stories/view/${t.slug}`,children:e("img",{src:`${o}${t.image===""?"/default_images/404.jpg":"/storage/"+t.image}`,alt:t.name,className:"rounded-lg"})})}),a("div",{className:"pt-2 text-center",children:[" ",e("a",{href:`${o}/stories/view/${t.slug}`,className:"text-lg hover:underline",children:window.locale==="mm"?t.mm_name:t.name})]}),e("div",{className:"my-2 flex flex-wrap items-center gap-1",children:t.categories.map((l,p)=>e("a",{className:"sky-button py-1 px-1 text-sm",href:`${o}/categories/${l.slug}`,children:window.locale==="mm"?l.mm_name:l.name},l.id))}),r.some(l=>l.slug===t.slug)?e("button",{className:"text-sm orange-button p-1",onClick:()=>{U(t)},children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"close-outline"}),window.locale_deselect]})}):e("button",{className:"text-sm green-button p-1",onClick:()=>{te(t)},children:a("div",{className:"flex items-center gap-1",children:[e("ion-icon",{name:"add-outline"}),window.locale_select]})}),e("div",{className:"text-xs text-right mt-3",children:t.created_at})]},t.slug))}):e("div",{className:"flex items-center place-content-center mt-5",children:window.locale_no_records}),i.data.length>0&&e("div",{className:"flex place-content-center items-center",children:e(me,{links:i.links,current_page:i.current_page,next_page_url:i.next_page_url,prev_page_url:i.prev_page_url,setPage:S})})]})]}),c&&e("div",{className:"filter-options-div",children:a("div",{children:[a("div",{className:"flex items-center gap-4",children:[e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{k(!c)},className:"sky-button-rounded pt-1 px-0 py-0 w-8 h-8",children:e("span",{className:"text-lg",children:e("ion-icon",{name:"close-outline"})})})}),e("div",{children:e("button",{type:"button",id:"filter-options-close",onClick:()=>{ae()},className:"sky-button-rounded",children:e("div",{className:"p-0 m-0 flex items-center",children:a("div",{className:"flex items-center",children:[e("span",{className:"text-lg pt-1",children:e("ion-icon",{name:"trash-outline"})}),window.locale_clear_filter]})})})})]}),a("div",{className:"grid grid-cols-1 lg:text-left my-2",children:[a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_search_mm_name}),e("input",{type:"text",value:$,onChange:t=>{S(1),M(t.target.value)},className:"input-content",placeholder:window.locale_mm_name})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_start_date}),e("input",{name:"startDate",type:"datetime-local",value:L,onChange:t=>{D(t.target.value)},className:"input-content"})]}),a("div",{className:"px-4 py-2 text-left",children:[e("span",{children:window.locale_end_date}),e("input",{name:"endDate",type:"datetime-local",value:F,onChange:t=>{B(t.target.value)},className:"input-content"})]}),a("div",{className:"px-4 py-2",children:[e("span",{children:window.locale_filter_categories}),e(ue,{className:"focus:outline-none text-black focus:ring focus:ring-sky-400 my-1",isDisabled:O,isLoading:O,closeMenuOnSelect:!1,components:ge(),isMulti:!0,value:j,onChange:E,options:V})]}),e("div",{className:"px-4 py-2",children:e("div",{className:"flex gap-5",children:a("div",{children:[e("span",{children:window.locale_sort_by}),a("select",{onChange:t=>{P(t.target.value)},value:R,name:"sortBy",id:"category-sort-by-select",className:"text-black px-1 w-23 focus:outline-none block mt-2 border border-sky-400 shadow-md",children:[e("option",{value:"latest",children:window.locale_latest}),e("option",{value:"oldest",children:window.locale_oldest})]})]})})})]})]})}),v&&e(de,{openConfirm:v,setOpenConfirm:m,confirmElement:Y,setConfirmElement:T,confrimLoading:Z,confrimAction:ee,children:window.locale_sure_send})]})},xe=()=>e(G,{children:e(re,{children:e(oe,{children:e(ce,{path:"/",element:e(he,{})})})})});le(document.getElementById("root")).render(e(xe,{}));
